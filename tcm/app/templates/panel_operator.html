{% extends "base.html" %}
{% block title %}Panel operatora{% endblock %}
{% block content %}
<div class="row">
  <div class="col">
    <div class="section">
      <h2>Status alarmu</h2>
      <div class="card">
        <p>Alarm aktywny: <strong>{{ 'tak' if state.alarm_reason else 'nie' }}</strong></p>
        <p>Powód: <strong>{{ state.alarm_reason if state.alarm_reason else 'brak' }}</strong></p>
        <p>Buzzer wyciszony: <strong>{{ 'tak' if state.buzzer_muted else 'nie' }}</strong></p>
        <p>Strike aktywny do: <strong>{{ state.strike_active_until if state.strike_active_until else 'nieaktywny' }}</strong></p>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="section">
      <h2>Podgląd czujników</h2>
      <div class="card">
        <table>
          <tbody>
            <tr><th>Bateria — temperatura</th><td>{{ state.sensors.temp_batt if state.sensors.temp_batt is not none else '—' }} °C</td></tr>
            <tr><th>Bateria — wilgotność</th><td>{{ state.sensors.hum_batt if state.sensors.hum_batt is not none else '—' }} %</td></tr>
            <tr><th>Szafa — temperatura</th><td>{{ state.sensors.temp_cab if state.sensors.temp_cab is not none else '—' }} °C</td></tr>
            <tr><th>Szafa — wilgotność</th><td>{{ state.sensors.hum_cab if state.sensors.hum_cab is not none else '—' }} %</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <h2>Sterowanie strike</h2>
  <div class="card">
    {% if config.strike.assignments %}
      <div class="grid">
        {% for strike_id, strike in config.strike.assignments.items() %}
          <div class="strike-action">
            <strong>{{ strike_id|replace('_', ' ')|upper }}</strong>
            {% if strike.transistor %}
              <a class="btn" href="/api/v1/strike/{{ strike_id }}/trigger">Wyzwól ({{ strike.transistor }})</a>
            {% else %}
              <span class="pill off">Nie skonfigurowano</span>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>Brak przypisań elektrozaczepów.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
